var AnnConfig=AnnConfig||{};
(function(k,u,v,l){function x(a,b,c){var f=a[b],d=q(a.namespace+"."+b);a[b]=function(){var b=null;c.apply(this,arguments);b=f.apply(this,arguments);"undefined"!==typeof d.after&&0<d.after.length&&k.each(d.after,function(){var c=d.after.shift();if("undefined"!==typeof c.method){var g=c.method.split("."),e=g.pop();AnnJS.namespace(g.join("."))[e].apply(a,c.args);"function"===typeof c.callback&&c.callback.apply(a,b)}else"function"===typeof c.execute&&c.execute()});return b}}function q(a){for(var a=a.split("."),
b=y,c=[],f=0,f=0;f<a.length;f+=1)c.push(a[f]),"undefined"===typeof b[a[f]]&&(b[a[f]]={},b[a[f]].after=[],b[a[f]].done=!1,b[a[f]].namespace=c.join(".")),b=b[a[f]];return b}"undefined"===typeof console&&(console={log:function(){return!0},error:function(){return!0},info:function(){return!0},warn:function(){return!0},debug:function(){return!0},time:function(){return!0},timeEnd:function(){return!0},groupCollapsed:function(){return!0},groupEnd:function(){return!0},group:function(){return!0}});console.info("Welcome in "+
location.host+", u're now working with AnnJS framework");k(document).ready(function(){console.info("DOM content has loaded, OnDOMready started executing")});AnnConfig=k.extend(!0,{debug:!0,cssAsset:[],jsAsset:[],minifyDir:"",minifyAllowed:!1,tplDir:"/tpl.php?file=",jsDir:"/lib/",cssDir:"/css/",tplTimeStampPrefix:"?",jsTimeStampPrefix:"?",cssTimeStampPrefix:"?",getTemplateMethod:"GET",timeStamp:Math.floor(1E15*Math.random()),language:null,fulldebug:!1},AnnConfig);var l=k.extend(!0,{},AnnConfig),r=
{length:0};in_array=function(a,b){for(var c=0,f=b.length;c<f;c++)if(b[c]==a)return!0;return!1};k.fn.getData=function(a){a="undefined"!==typeof a?a:!0;if(this.attr("z-data")!==v&&this.attr("z-data")){var b=k.parseJSON(this.attr("z-data"));a&&this.removeAttr("z-data");return b}return null};var s={},y={},m={},w={},t={namespace:function(a){var a="string"===typeof a?a:(console.error("ns_string must be string type"),"randomString"),a=a.split("."),b=t,c;"objects"===a[0]&&(a=a.slice(1));for(c=0;c<a.length;c+=
1)"undefined"===typeof b[a[c]]&&(b[a[c]]={}),b=b[a[c]];b.hashString=a.join(".");return b}},p={whatToLoad:function(a,b,c){var f=AnnJS.minifyOn()?"/"+l.minifyDir+"/b="+a+"&f=":c,b=b instanceof Array||"string"===typeof b?b:console.error("thingsToLoad must be array or string type"),d=[],h="css"===a?"styles":"js"===a?"scripts":null,j="css"===a?l.cssTimeStampPrefix:"js"===a?l.jsTimeStampPrefix:AnnJS.generateRandomNumber(),g=l.timeStamp;if(null===h)return console.warn('"what" has to be "css" or "js"'),null;
if("string"===typeof b&&!in_array(b,AnnJS[h].__loaded))return AnnJS[h].__loaded.push(b),f+b+"."+a+j+g;if(b instanceof Array&&1===b.length&&!in_array(b[0],AnnJS[h].__loaded))return AnnJS[h].__loaded.push(b[0]),f+b[0]+"."+a+j+g;b instanceof Array&&1<b.length&&k.each(b,function(b,c){in_array(c,AnnJS[h].__loaded)||(AnnJS[h].__loaded.push(c),d.push((!AnnJS.minifyOn()?f:"")+c+"."+a))});if(AnnJS.minifyOn()&&0<d.length)return d=f+d.join(",")+j+g;d instanceof Array&&1===d.length?d[0]+=j+g:d instanceof Array&&
k.each(d,function(a){d[a]+=j+g});return d instanceof Array&&0<d.length?d:null},getTemplate:function(a,b){var a="string"===typeof a?a:console.error("templateName must be string type"),c=AnnJS.templates;if("object"!==typeof m[a]||!(m[a]instanceof Array))m[a]=[];m[a].push("function"===typeof b?b:function(){return!1});"undefined"===typeof c[a]&&(c[a]="loading",k.ajax({type:"GET",contentType:"text/plain",cache:!0,url:window.location.protocol+"//"+window.location.host+AnnConfig.tplDir+a+"&"+_c("TPL_TIMESTAMP"),
success:function(b){var d=null,h=null,j=0,g=0;if(""===b)console.error("We're sorry but there is no such template with name "+a);else if("object"===typeof Mustache)if(b.match(/^\<\*CSS_TO_LOAD\*(.*)\*\>/i)?(h=b.match(/^\<\*CSS_TO_LOAD\*(.*)\*\>/i)[1].trim().split(","),d=b.replace(/^\<\*CSS_TO_LOAD\*(.*)\*\>\s*/i,"")):d=b,null!==h&&0<h.length)$A.styles.loadStyles(h,function(){var b=0,g=m[a].length;c[a]=d;for(b=0;b<g;b++)m[a].shift()(c[a])},!0);else{c[a]=d;g=m[a].length;for(j=0;j<g;j++)m[a].shift()(c[a])}else delete c[a],
console.error("We're sorry but template engine has not occured")}}))},controller:function(a){for(var a="string"===typeof a?a:console.error("ns_string must be string type"),b=a.split("."),c=[],f=w,d=0,d=0;d<b.length;d+=1)c.push(b[d]),"object"!==typeof f[b[d]]&&(f[b[d]]={controller:{},namespace:c.join("."),innerControllers:{}}),f=d<b.length-1?f[b[d]].innerControllers:f[b[d]].controller;f.namespace=a;f.createdObjects=[];f.rebuildObjectsTable=function(){var a=[];for(dataName in this.createdObjects.all)"object"!==
typeof this.createdObjects.all[dataName]||this.createdObjects.all[dataName].data&&!0===this.createdObjects.all[dataName].data.toRemove?"object"===typeof this.createdObjects.all[dataName]&&this.createdObjects.all[dataName].elements.main.remove():a.push(this.createdObjects.all[dataName]);delete this.createdObjects;this.createdObjects=[];this.createdObjects.all=[];for(rootObjectName in a)if(rootObject=a[rootObjectName],this.createdObjects.push(rootObject),this.createdObjects.all.push(rootObject),rootObject.data)for(dataName in rootObject.data)if(!(dataName instanceof
Array||"object"===typeof dataName))if(this.createdObjects[dataName]||(this.createdObjects[dataName]={}),this.createdObjects[dataName][rootObject.data[dataName]]&&!(this.createdObjects[dataName][rootObject.data[dataName]]instanceof Array)){var b=this.createdObjects[dataName][rootObject.data[dataName]];this.createdObjects[dataName][rootObject.data[dataName]]=[];this.createdObjects[dataName][rootObject.data[dataName]].push(b);this.createdObjects[dataName][rootObject.data[dataName]].push(rootObject)}else this.createdObjects[dataName][rootObject.data[dataName]]&&
this.createdObjects[dataName][rootObject.data[dataName]].length?this.createdObjects[dataName][rootObject.data[dataName]].push(rootObject):this.createdObjects[dataName][rootObject.data[dataName]]=rootObject};f.makeObject=function(b,c){var d=this,e={};"object"===typeof b&&!(b instanceof jQuery)&&(c=b);b instanceof jQuery&&null!==b.getObject()?e=b.getObject():b instanceof jQuery&&(e={elements:{main:b}},b.attr("data-a")!==v&&k.extend(!0,c,{data:b.getData()}));"undefined"!==typeof c&&k.extend(!0,e,c);
if("object"===typeof e.elements){for(element in e.elements)if(e.elements.hasOwnProperty(element))if(selector=e.elements[element],"string"===typeof selector)e.elements[element]=b.find(e.elements[element]);else if("object"===typeof selector&&!(selector instanceof Array)&&"string"===typeof selector.main){if(1===e.elements[selector.main].length){var n=e.elements[selector.main],l=k.extend({},selector);delete l.main;e.elements[element]=AnnJS.callQueries(l,n,e)}}else"object"===typeof selector&&selector instanceof
Array&&"string"===typeof selector[0]&&1===e.elements[selector[0]].length&&(e.elements[element]=AnnJS.callQueries(selector,e.elements[selector[0]],e));k.each(e.elements,function(a){0===e.elements[a].length&&console.warn("There is no element ",a," in ",e," object, from ",d.hashString)})}b instanceof jQuery&&(n=t.namespace(d.hashString),$A.addToHash(n,e));if(e.data)for(dataName in e.data)dataName instanceof Array||"object"===typeof dataName||(d.createdObjects[dataName]||(d.createdObjects[dataName]={}),
d.createdObjects[dataName][e.data[dataName]]&&!(d.createdObjects[dataName][e.data[dataName]]instanceof Array)?(n=d.createdObjects[dataName][e.data[dataName]],d.createdObjects[dataName][e.data[dataName]]=[],d.createdObjects[dataName][e.data[dataName]].push(n),d.createdObjects[dataName][e.data[dataName]].push(e)):d.createdObjects[dataName][e.data[dataName]]&&d.createdObjects[dataName][e.data[dataName]].length?d.createdObjects[dataName][e.data[dataName]].push(e):d.createdObjects[dataName][e.data[dataName]]=
e);e.root=d;d.createdObjects.push(e);d.createdObjects.all||(d.createdObjects.all=[]);d.createdObjects.all.push(e);e.makeObject=function(){var a=f.makeObject.apply(f,arguments);a.parentObject=e;return a};"function"===typeof e.__construct&&(e.__construct(),delete e.__construct);if(e.events)for(a in e.events)n=AnnJS.subscribe(a,e.events[a],e),e.events[a]=n;return e};return f},callQueries:function(a,b,c){var f=null,d=null,h=f=null,j=!1;for(d in a)if(f=null,!("object"===typeof a&&a instanceof Array&&"object"!==
typeof a[d])){"object"===typeof a[d]&&(f=a[d]);if(null!==f){for(h in f)if(f.hasOwnProperty(h)&&"function"!==typeof h)break;d=h;f=f[h]}else if("string"===typeof d)f=a[d];else continue;if(null===f){if(b=0===b[d]().length?(console.warn('Your "'+d+'" function, didn\'t work on "',b,'" element, by ',c),j=!0,k([])):b[d](),!0===j)break}else if("string"===typeof f&&(b=0===b[d](f).length?(console.warn('Your "'+d+'" function with parameter "'+f+'", didn\'t work on "',b,'" element, by',c),j=!0,k([])):b[d](f),
!0===j))break}return b},onDomReady:function(a){var b=null,c=p.controller(a.namespace),f=a.namespace,d=null;k.extend(!0,c,a);!0===l.fulldebug&&console.info("Upgrading methods for "+f+" ...");for(b in c)"function"===typeof c[b]&&x(c,b,function(a){var b=q(f+"."+a);0<b.after.length&&k.each(b.after,function(){var a=b.after.shift();if("undefined"!==typeof a.method){var d=a.method.split("."),f=d.pop();AnnJS.namespace(d.join("."))[f].apply(c,a.args);"function"===typeof a.callback&&a.callback.apply(c,result)}else"function"===
typeof a.execute&&a.execute()});return function(){b.done=!0;!0===l.fulldebug&&(r[r.length]={object:this,method:a,arguments:arguments,number:r.length,type:"method"},r.length++,console.groupCollapsed(this.namespace,", ",a),console.warn("rootFunction: ",a),console.log("object: ",this),console.log("arguments: ",arguments),console.groupEnd())}}(b));delete b;"function"===typeof c.onDomReady&&!0===l.fulldebug&&console.info("Appending domReady for "+c.namespace);if(c.events)for(d in c.events)a=AnnJS.subscribe(d,
c.events[d],c),c.events[d]=a;"function"===typeof c.__construct&&(c.__construct(),delete c.__construct);k(document).ready(function(){function a(b){var c=[];for(referenceName in b)referenceObjectNamespace=b[referenceName],"string"===typeof referenceObjectNamespace&&c.push(referenceObjectNamespace);return 0<c.length?c:null}if(c.refs)AnnJS.execute({method:c.namespace+".onDomReady",relatives:a(c.refs)});else{if(c.elements)for(element in c.elements){var b=c.elements[element];if("string"===typeof b)c.elements[element]=
k(c.elements[element]);else if("object"===typeof b&&!(b instanceof Array)){if(0<c.elements[b.main].length){var d=c.elements[b.main],e=k.extend({},b);delete e.main;c.elements[element]=p.callQueries(e,d,c)}}else"object"===typeof b&&b instanceof Array&&"undefined"!==typeof c.elements[b[0]]&&0<c.elements[b[0]].length&&(c.elements[element]=p.callQueries(b,c.elements[b[0]],c));0===c.elements[element].length&&console.warn('There is no element with "'+b+'" selector, executed by "'+f+'" object')}"function"===
typeof c.onDomReady&&(!0===l.fulldebug&&console.info("DomReady for "+c.namespace+" started"),c.onDomReady(),!0===l.fulldebug&&console.info("DomReady for "+c.namespace+" ended"))}});!0===l.fulldebug&&console.info("End of "+f)}};$A=AnnJS={execute:function(a){var b=this,c=null!=a.relatives?a.relatives:null,f=a.args||[],d=a.method,h=a.callback,j=a.execute,g=a=a=null,e=g=null;if("object"===typeof c&&c instanceof Array){if(a=function(){var a=null,e=null;for(a in c)if("string"===typeof a&&(a=c[a],e=q(a),
!1===e.done))return!1;"string"===typeof d?b.execute({method:d,args:f,callback:h}):"function"===typeof j&&j();return!0},e=g=null,!1===a())for(g in c)"string"===typeof g&&(g=c[g],e=q(g),!1===e.done&&e.after.push({execute:a}))}else g=null,a=d.split("."),g=a.pop(),e=a.join("."),null!==b.namespace(e)?(a=b.namespace(e),g=b.namespace(e)[g].apply(a,f),"function"===typeof h&&h.apply(a,[g])):(a=q(d),a.after.push({method:d,args:f,callback:h}))},publish:function(a,b,c,f){function d(a){k.each(a,function(){this.callback.apply(this.object,
b)})}var a="string"===typeof a?a:(console.error("ns_string must be string type"),"randomString"),h=a.split("."),c=c||!1,j,b=b?b:[],g;j=s;for(g=0;g<h.length;g+=1){if("undefined"===typeof j[h[g]])return console.warn("There is no "+a+" subscription"),null;j=j[h[g]];!0===c&&"number"!==typeof f?d(j._events):!0===c&&("number"===typeof f&&g>=h.length-f)&&d(j._events)}!1===c&&d(j._events);j._publishes.push(b)},subscribe:function(a,b,c,f){var a="string"===typeof a?a:(console.error("ns_string must be string type"),
"randomString"),d=a.split("."),h,j=c?!0:!1,c=j?c:b,g=null,e=g=0,k=arguments;h=s;for(g=0;g<d.length;g+=1){if(j&&"_"===d[g].substring(0,1))return d[g]=c.data[d[g].substring(1,d[g].length)],arguments[0]=d.join("."),AnnJS.subscribe.apply(AnnJS,arguments);if(j&&"+"===d[g].substring(0,1)){h=c.data[d[g].substring(1,d[g].length)];for(var j=a,e=0,l=[],e=0;e<h.length;e++)d[g]=h[e],k[0]=d.join("."),l.push(AnnJS.subscribe.apply(AnnJS,k));k[0]=j;return[j,l]}if(j&&"{"===d[g].substring(0,1)){h=a;j=0;e=d[g].split(",");
l=[];e[0]=e[0].substring(1,e[0].length);e[e.length-1]=e[e.length-1].substring(0,e[e.length-1].length-1);for(j=0;j<e.length;j++)d[g]=e[j],k[0]=d.join("."),l.push(AnnJS.subscribe.apply(AnnJS,k));k[0]=h;return[h,l]}"undefined"===typeof h[d[g]]&&(h[d[g]]={},h[d[g]]._events=[],h[d[g]]._publishes=[]);h=h[d[g]];if(!0===f)for(;e<h._publishes.length;)b.apply(c,h._publishes[e]),e++}g={callback:b,object:c};h._events.push(g);return[d.join("."),g]},unsubscribe:function(a){var b=a[0],c=b.split("."),f=a[1],d;d=
s;for(i=0;i<c.length;i+=1){if("undefined"===typeof d[c[i]])return console.error("There is no "+b+" subscription"),null;d=d[c[i]]}d&&k.each(d._events,function(a){this==f&&d._events.splice(a,1)})},styles:{__loaded:[],loadStyles:function(a,b,c){a="string"===typeof a||a instanceof Array?a:console.error("styles must be string or array type");c="undefined"!==typeof c?c:l.cssDir;a=p.whatToLoad("css",a,c);null===a?(!0===l.fulldebug&&console.info("There were no css to load"),b&&b()):u.css(a,function(){b&&
b()})}},scripts:{__loaded:[],loadScripts:function(a,b,c){"string"===typeof a||a instanceof Array||console.error("scripts must be string or array type");c="undefined"!==typeof c?c:l.jsDir;a=p.whatToLoad("js",a,c);null===a?(!0===l.fulldebug&&console.info("There were no js to load"),b&&b()):u.js(a,function(){b&&b()})}},templates:{},tpl:function(a,b,c,f){var a="string"===typeof a?a:console.error("templateName must be string type"),b=b instanceof Array||"object"===typeof b?b:console.error("data must be array/JSON type"),
c="function"===typeof c?c:console.error("callback must be function type"),d=this.templates,f=f||window;"string"===typeof d[a]&&"loading"!==d[a]&&"object"===typeof Mustache?c.call(f,k(Mustache.to_html(d[a],b))):p.getTemplate(a,function(){c.call(f,k(Mustache.to_html(d[a],b)))})},skeletons:{},mixin:function(a,b){a="string"===typeof a?a:console.error("name must be string type");b=b instanceof Object?b:null;return null===b?k.extend(!0,{},AnnJS.skeletons[a]):this.skeletons[a]=b},namespace:function(a){for(var a=
"string"===typeof a?a:console.error("ns_string must be string type"),a=a.split("."),b=w,c=0,c=0;c<a.length;c+=1){if("object"!==typeof b[a[c]])return null;b=c<a.length-1?b[a[c]].innerControllers:b[a[c]].controller}return b},generateRandomNumber:function(){return Math.floor(1E15*Math.random())},appendHashForElement:function(a,b){var c=this.generateRandomNumber();b.attr(hashString,a+"."+c);return c},getObject:function(a){var b;if(!a)return null;if("string"===typeof a)b=a;else if("object"===typeof a)if("string"===
typeof a.getHash())b=a.getHash();else return null;a=b.split(".");b=t;var c;"AnnJS"===a[0]&&(a=a.slice(1));for(c=0;c<a.length;c+=1){if("undefined"===typeof b[a[c]])return null;b=b[a[c]]}return b},addToHash:function(a,b){b=b instanceof Object?b:console.error("elementObject must be object type");null===a&&(a=this);var c=AnnJS.appendHashForElement(a.hashString,b.elements.main);a[c]=b;return a},minifyOn:function(){return l.minifyAllowed},registerController:function(a,b){var c="string"===typeof a.namespace?
a.namespace:console.error("namespace must be string type, while running "+c);!0===l.fulldebug&&console.info("Initializing: "+c);b="object"===typeof b?b:console.error("extenstion must be object type, while running "+c);"object"===typeof a.refs&&null!==a.refs&&(b.refs=a.refs);b.namespace=a.namespace;p.onDomReady(b)},registerMixin:function(a){var b="string"===typeof a.namespace?a.namespace:console.error("namespace must be string type, while running "+b);!0===l.fulldebug&&console.info("Initializing: "+
b)}};k.extend(AnnJS.scripts.__loaded,l.jsAsset);k.extend(AnnJS.styles.__loaded,l.cssAsset)})(jQuery,LazyLoad,void 0,AnnConfig);